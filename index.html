<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ghi âm và gửi lên Telegram</title>
</head>
<body>
  <h1>Ghi âm và gửi lên Telegram</h1>
  <button id="start-recording">Bắt đầu ghi âm</button>
  <button id="stop-recording">Dừng ghi âm</button>
  <button id="send-recording">Gửi ghi âm</button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script>
    $(document).ready(function() {
      // Hàm bắt đầu ghi âm
      function startRecording() {
        // Khởi tạo một đối tượng MediaRecorder
        const recorder = new MediaRecorder(navigator.mediaDevices.getUserMedia({
          audio: true
        }));

        // Thêm sự kiện ondataavailable cho recorder
        recorder.addEventListener("dataavailable", function(event) {
          // Lấy dữ liệu âm thanh từ recorder
          const audioData = event.data;

          // Thêm dữ liệu âm thanh vào phần tử HTML có id là "recording"
          const recording = document.getElementById("recording");
          recording.appendChild(audioData);
        });

        // Bắt đầu ghi âm
        recorder.start();
      }

      // Hàm dừng ghi âm
      function stopRecording() {
        // Dừng ghi âm
        const recorder = document.getElementById("recorder");
        recorder.stop();

        // Thêm một nút gửi ghi âm vào trang web
        document.getElementById("send-recording").style.display = "block";
      }

      // Hàm gửi ghi âm
      function sendRecording() {
        // Lấy dữ liệu âm thanh từ phần tử HTML có id là "recording"
        const recording = document.getElementById("recording");
        const audioData = recording.innerHTML;

        // Gửi ghi âm lên Telegram
        $.ajax({
          url: "https://api.telegram.org/bot6630148049:AAG1xYKPmQvG1eUCb8_JygwwwF-F2dkNQ0/sendAudio",
          data: {
            "chat_id": -1002081721946,
            "audio": audioData
          },
          type: "POST"
        }).done(function() {
          console.log("Ghi âm đã được gửi lên Telegram");
        });
      }

      // Thêm sự kiện click cho nút bắt đầu ghi âm
      document.getElementById("start-recording").addEventListener("click", startRecording);

      // Thêm sự kiện click cho nút dừng ghi âm
      document.getElementById("stop-recording").addEventListener("click", stopRecording);
    });
  </script>
</body>
</html>
