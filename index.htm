<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Gửi dữ liệu vào bot Telegram</title>
</head>
<body style="margin: 0 auto; padding: 0 20px; background-color: #fff; color: #ff00ff;">
    <h1>Gửi dữ liệu vào bot Telegram</h1>

    <div class="alert alert-info" style="display: none;">
        <strong>Chào mừng!</strong> Bạn đã truy cập trang web.
    </div>

    <script>
        let seen = false;

        function showAlert() {
            if (!seen) {
                document.querySelector(".alert").style.display = "block";
                seen = true;
            }
        }

        window.onload = showAlert;
    </script>

    <form action="" method="post">
        <input type="text" name="ip" value="{{ navigator.ip }}">
        <input type="text" name="device" value="{{ navigator.userAgent }}">
        <input type="text" name="network" value="{{ new Date() }}">

        <input type="file" name="image" accept="image/*">
        <input type="file" name="file" accept="*">
        <textarea name="text" placeholder="Văn bản"></textarea>

        <button type="submit">Gửi</button>
    </form>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script>
        $(document).ready(function() {
            $("form").submit(function(e) {
                e.preventDefault();

                var ip = $("input[name='ip']").val();
                var device = $("input[name='device']").val();
                var network = $("input[name='network']").val();

                var image = $("input[name='image']").prop("files")[0];
                var file = $("input[name='file']").prop("files")[0];
                var text = $("textarea[name='text']").val();

                var data = {
                    ip: ip,
                    device: device,
                    network: network,
                    image: image,
                    file: file,
                    text: text,
                };

                $.ajax({
                    url: "https://api.telegram.org/bot6630148049:AAG1xYKPmQvG1EaUCb8_JygwwwF-F2dkNQ0/sendMessage",
                    method: "POST",
                    data: JSON.stringify(data),
                    headers: {
                        "Content-Type": "application/json",
                    },
                }).done(function(response) {
                    console.log(response);
                });
            });
        });
    </script>
</body>
</html>
